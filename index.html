<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Office Bomber: Big Sight Mayhem!</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script type="importmap">
{
  "imports": {
    "react": "https://aistudiocdn.com/react@^19.1.1",
    "react-dom/": "https://aistudiocdn.com/react-dom@^19.1.1/",
    "react/": "https://aistudiocdn.com/react@^19.1.1/",
    "@google/genai": "https://aistudiocdn.com/@google/genai@^1.20.0"
  }
}
</script>
    <style>
      body {
        background-color: #000;
        background-image:
            radial-gradient(white, rgba(255,255,255,.2) 2px, transparent 40px),
            radial-gradient(white, rgba(255,255,255,.15) 1px, transparent 30px),
            radial-gradient(white, rgba(255,255,255,.1) 2px, transparent 40px),
            radial-gradient(rgba(255,255,255,.4), rgba(255,255,255,.1) 2px, transparent 30px);
        background-size: 550px 550px, 350px 350px, 250px 250px, 150px 150px;
        background-position: 0 0, 40px 60px, 130px 270px, 70px 100px;
        color: #e2e8f0;
        display: flex;
        justify-content: center;
        align-items: center;
        min-height: 100vh;
        font-family: sans-serif;
        overflow: hidden;
      }
      .tile {
        display: inline-block;
        background-size: cover;
        box-sizing: border-box;
      }
      .floor { 
        background-color: #2d3748;
        background-image:
            linear-gradient(rgba(255, 255, 255, 0.07) 1px, transparent 1px),
            linear-gradient(90deg, rgba(255, 255, 255, 0.07) 1px, transparent 1px);
        background-size: 20px 20px;
      }
      .wall { 
        background: linear-gradient(145deg, #4c5a70, #2c3a50);
        box-shadow: inset 0 0 8px rgba(99, 179, 237, 0.6), 0 0 4px rgba(0,0,0,0.5);
        border: 1px solid #63b3ed;
        border-radius: 4px;
        z-index: 2;
        position: relative;
      }
      .partition {
        background: linear-gradient(145deg, #a0aec0, #718096);
        border: 1px solid #e2e8f0;
        box-shadow: 0 2px 4px rgba(0,0,0,0.3);
        border-radius: 2px;
        z-index: 1;
        position: relative;
      }

      .character-container {
        display: flex;
        justify-content: center;
        align-items: center;
        filter: drop-shadow(0 4px 3px rgba(0,0,0,0.7));
      }
      .player.glow {
        animation: glow-effect 0.4s ease-in-out;
      }
      @keyframes glow-effect {
        0% { filter: brightness(1.5) drop-shadow(0 0 2px #fff); }
        50% { filter: brightness(2.5) drop-shadow(0 0 8px #fff); }
        100% { filter: brightness(1.5) drop-shadow(0 0 2px #fff); }
      }

      .player .head, .enemy .head {
        position: absolute;
        width: 50%;
        height: 50%;
        background-color: #f7d9b3; /* skin tone */
        border-radius: 50%;
        top: 5%;
        left: 25%;
        z-index: 2;
      }

      .player .body, .enemy .body {
        position: absolute;
        width: 60%;
        height: 50%;
        top: 35%;
        left: 20%;
        border-radius: 10px 10px 0 0;
        z-index: 1;
      }
      
      .player .suit { background-color: #2c5282; }
      .player .tie {
        position: absolute;
        width: 10%;
        height: 35%;
        background-color: #c53030;
        top: 35%;
        left: 45%;
        z-index: 3;
      }

      .enemy .t-shirt { background-color: #edf2f7; }
      .enemy .flyer-hand {
        position: absolute;
        width: 25%;
        height: 10%;
        background-color: #fff;
        border: 1px solid #ccc;
        top: 60%;
        left: 70%;
        transform: rotate(10deg);
        z-index: 3;
      }

      .player .arm, .enemy .arm {
        position: absolute;
        width: 20%;
        height: 40%;
        top: 40%;
        z-index: 0;
        border-radius: 8px;
      }
      .player .arm { background-color: #2c5282; } /* Suit color */
      .enemy .arm { background-color: #f7d9b3; } /* Skin tone */

      .arm.left { left: 5%; }
      .arm.right { right: 5%; }

      .bomb {
        display: flex;
        justify-content: center;
        align-items: center;
        background-color: #2d3748;
        border-radius: 50%;
        border: 3px solid #f6e05e;
        color: #f6e05e;
        font-weight: bold;
        font-size: 1.2rem;
        text-shadow: 0 0 5px #000, 0 0 10px #f6e05e;
        filter: drop-shadow(0 2px 3px rgba(0,0,0,0.6));
      }

      .explosion {
        border-radius: 50%;
        background-color: #f6e05e;
        animation: explosion-effect 0.5s forwards;
      }

      @keyframes explosion-effect {
        0% { transform: scale(0.5); background-color: #fff; opacity: 1; }
        50% { background-color: #f6e05e; }
        100% { transform: scale(1.5); background-color: #f56565; opacity: 0; }
      }

      .flyer-particle {
        position: absolute;
        width: 10px;
        height: 14px;
        background-color: white;
        border: 1px solid #ccc;
        transition: transform 1s ease-out, opacity 1s ease-out;
      }
      
      .shake {
        animation: screen-shake 0.3s;
      }

      @keyframes screen-shake {
        0% { transform: translate(0, 0); }
        25% { transform: translate(-3px, 3px); }
        50% { transform: translate(3px, -3px); }
        75% { transform: translate(-3px, 3px); }
        100% { transform: translate(0, 0); }
      }
      
      /* HUD styles */
      .hud {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 10px;
        align-items: center;
        padding: 8px 20px;
        background: rgba(10, 20, 40, 0.7);
        backdrop-filter: blur(5px);
        color: #e2e8f0;
        font-size: 1rem;
        font-weight: bold;
        border-radius: 8px;
        margin-bottom: 1rem;
        border: 1px solid rgba(0, 255, 255, 0.3);
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.5);
      }
      .hud-item {
        font-family: 'Courier New', Courier, monospace;
        color: #90cdf4;
        display: flex;
        justify-content: center;
        align-items: center;
      }
       .hud-item.stats {
        display: flex;
        gap: 10px;
      }
      .hud-value {
        color: #ffffff;
        margin-left: 8px;
      }
      .timer.timer-warning .hud-value {
        color: #f56565;
        animation: pulse-red 1s infinite;
      }

      @keyframes pulse-red {
        0% { transform: scale(1); text-shadow: 0 0 5px #f56565; }
        50% { transform: scale(1.1); text-shadow: 0 0 15px #f56565; }
        100% { transform: scale(1); text-shadow: 0 0 5px #f56565; }
      }

      /* Bomb Fuse Animations */
      .bomb.fuse-slow { animation: pulse-slow 1.5s infinite ease-in-out; }
      .bomb.fuse-fast { animation: pulse-fast 0.5s infinite ease-in-out; }
      .bomb.fuse-critical { animation: pulse-critical 0.2s infinite ease-in-out; }

      @keyframes pulse-slow {
        0% { transform: scale(1); box-shadow: 0 0 10px #f6e05e; }
        50% { transform: scale(1.05); box-shadow: 0 0 20px #f6e05e; }
        100% { transform: scale(1); box-shadow: 0 0 10px #f6e05e; }
      }
      @keyframes pulse-fast {
        0% { transform: scale(1.05); box-shadow: 0 0 20px #f687b3; }
        50% { transform: scale(1.1); box-shadow: 0 0 30px #f687b3; }
        100% { transform: scale(1.05); box-shadow: 0 0 20px #f687b3; }
      }
      @keyframes pulse-critical {
        0% { background-color: #f56565; transform: scale(1.1); box-shadow: 0 0 35px #c53030; }
        50% { background-color: #f6e05e; transform: scale(1.15); box-shadow: 0 0 45px #c53030; }
        100% { background-color: #f56565; transform: scale(1.1); box-shadow: 0 0 35px #c53030; }
      }
      
      /* Power-up styles */
      .powerup {
        width: 100%;
        height: 100%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 24px;
        font-weight: bold;
        border-radius: 8px;
        background: rgba(255, 255, 255, 0.1);
        box-shadow: 0 0 10px rgba(255, 255, 255, 0.5);
        animation: float 2s ease-in-out infinite;
      }
      @keyframes float {
        0% { transform: translateY(0px); }
        50% { transform: translateY(-5px); }
        100% { transform: translateY(0px); }
      }
      .powerup-flame { color: #f56565; } /* Red */
      .powerup-bomb { color: #63b3ed; } /* Blue */
      .powerup-speed { color: #48bb78; } /* Green */

      /* Feedback message styles */
      .feedback-message {
        position: absolute;
        font-size: 1rem;
        font-weight: bold;
        color: white;
        text-shadow: 1px 1px 3px black;
        pointer-events: none;
        animation: float-up 1.5s forwards ease-out;
        z-index: 100;
      }
      @keyframes float-up {
        0% { transform: translateY(0); opacity: 1; }
        100% { transform: translateY(-40px); opacity: 0; }
      }

    </style>
  <link rel="stylesheet" href="/index.css">
</head>
  <body>
    <div id="root"></div>
    <script type="module" src="/index.tsx"></script>
  </body>
</html>